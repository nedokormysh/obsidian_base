В качестве аргумента агрегирующих функций могут выступать не только столбцы, но также расчётные колонки или результат другой функции:

SELECT AVG(some_function(column))
FROM table

SELECT AVG(column_1 + column_2) FROM table

SELECT AGE('2022-12-12', '2021-11-10')

Результат:
397 days, 0:00:00

SELECT AGE(TIMESTAMP '2021-11-10')

Результат:
397 days, 0:00:00

SELECT AGE(current_date, '2021-11-10')::VARCHAR

Результат:
1 year 1 mon 2 days

## **Задание:**

С помощью функции `AGE` и агрегирующей функции рассчитайте возраст самого молодого курьера мужского пола в таблице `couriers`.

Возраст выразите количеством лет, месяцев и дней (как в примере выше), переведя его в тип `VARCHAR`. 

В качестве даты, относительно которой считать возраст курьеров, используйте свою текущую дату (либо не указывайте её на месте первого аргумента, как показано в примерах).

Полученную колонку со значением возраста назовите `min_age`.

Поле в результирующей таблице: `min_age`

SELECT min(age(birth_date))::varchar as min_age
FROM   couriers
WHERE  sex = 'male'


## **Задание:**

Воспользуйтесь функцией `AGE` и рассчитайте разницу в возрасте между самым старым и самым молодым пользователями мужского пола в таблице `users`. 

Разницу в возрасте выразите количеством лет, месяцев и дней, переведя её в тип `VARCHAR`. 

Колонку с посчитанным значением назовите `age_diff`.

Поле в результирующей таблице: `age_diff`

SELECT age(max(birth_date), min(birth_date))::varchar as age_diff
FROM   users
WHERE  sex = 'male'

[[Аггрегация_данных_content]]