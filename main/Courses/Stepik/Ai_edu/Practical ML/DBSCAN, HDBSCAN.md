У метода есть два гиперпараметра:

- размер окрестности (окружности) 𝜀ε
- минимальное число точек в окрестности min_samples


Алгоритм следующий:

- выбираем произвольную точку (например, А) и проводим вокруг нее окружность заданного радиуса
- считаем, сколько точек попадает в проведенную окружность:
    - если в окружность попадает ≥≥ точек, чем min_samples, то точку называем _основной (core point)_ и красим в красный, и переходим в любого ее соседа из окрестности, которого мы еще не посетили
    - если в окружности попадает меньше точек, чем min_samples (но больше одной - самой точки), то мы называем точку _граничной (border point)_ и красим ее в желтый. Затем переходим в любую точку, которую еще не посетили
    - если в окружность попала только сама выбранная точка, то мы называем ее _шумовой (noise point)_ и красим в синий. Затем переходим в любую точку, которую еще не посетили
- так обходим все точки

В итоге все точки, где мы можем пройти по пути от соседа к соседу, без перепрыгиваний (то есть группы core + border points) образуют кластеры.



# **Hierarchical DBSCAN**

Несмотря на то, что DBSCAN умеет находить кластеры сложной формы, не все задачи ему по плечу. Проблемы возникают, когда у кластеров разная плотность. Из-за этого невозможно подобрать оптимальные гиперпараметры, при которых DBSCAN верно находит кластеры и не называет какие-то кластеры или их часть шумом.

Шаг 1: В DBSCAN мы ходили от точки к точки с шагом 𝜀 - фиксированным радиусом окружности. Если мы хотим учесть разную плотность точек в кластерах, нам придется обобщить эту процедуру.

- Пусть $𝑐𝑜𝑟𝑒_𝑘(𝑥)$- расстояние от точки 𝑥x до 𝑘-го ближайшего соседа (приближение плотности)
- Тогда расстояние между точками 𝑎a и 𝑏b:

𝑑(𝑎,𝑏)=𝑚𝑎𝑥{𝑐𝑜𝑟𝑒𝑘(𝑎),𝑐𝑜𝑟𝑒𝑘(𝑏),𝜌(𝑎,𝑏)},d(a,b)=max{corek​(a),corek​(b),ρ(a,b)},

где 𝜌(𝑎,𝑏)ρ(a,b) - расстояние между точками 𝑎a и 𝑏b по исходной метрике (например, евклидово расстояние).

Благодаря такому способу вычисления расстояния:

- в области высокой плотности точек новое расстояние 𝑑(𝑎,𝑏)=𝜌(𝑎,𝑏)d(a,b)=ρ(a,b) равно исходному
- в области низкой плотности новое расстояние 𝑑(𝑎,𝑏)d(a,b) равно какому-то из 𝑐𝑜𝑟𝑒𝑘corek​ расстояний

То есть благодаря метрике 𝑑d мы оставляем плотные точки близкими друг к другу, а далекие точки - еще больше разводим друг относительно друга.

[[Кластеризация данных]]