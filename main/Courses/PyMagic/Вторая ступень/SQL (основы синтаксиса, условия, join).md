База данных чаще всего содержит одну или несколько таблиц. Каждая таблица обозначается именем (например, «Клиенты» или «Заказы»). Таблицы содержат записи (строки) с данными.
# Основы синтаксиса


1) Чтобы вывести таблицу на экран, либо ее отдельные элементы (сроки, столбцы) мы должны прописать код, используя такие методы как SELECT и FROM (не чувствительны к регистру).

```
SELECT *
FROM Orders
```

2) Чтобы вывести определенную колонку таблицы необходимо прописать ее название, либо несколько названий столбцов

```
Select ProdID, CustomerID
From Orders
```


3) Бывают ситуации, когда необходимо работать с несколькими таблицами, тогда после каждого названия таблицы необходимо указать сокращенное название и уже обращаться к нему при наборе названия колонок. Также сокращенное название можно записать через алиас as

```
Select o.ProdID, o.CustomerID
From Orders o
```

4) Для вывода первых N строк в разных БД используется различные операторы и конструкции. Операторы SQL не чувствительны к регистру, стоит обращать внимание на регистр при использовании таблиц и названия колонок.

```
select *
From orders o
LIMIT 10
```

5) Если мы хотим вывести/выбрать данные по определенному условию, то применяют оператор
WHERE. К примеру, мы хотим вывести клиентов с конкретным именем, либо клиентов чей
возраст более 30 лет и так далее.
В примере ниже мы вывели всех клиентов, которые имеют имя Sam

SELECT *
FROM Orders
WHERE FirstName = 'Sam'

6)  ORDER BY сортирует данные в порядке убывания или возрастания, также может использоваться совместно и с
другими операторами, например GROUP BY, OVER().
По умолчанию сортировка происходит по возрастанию, чтобы сделать по убыванию, необходимо добавить
DESC после необходимых колонок.
В примере ниже мы отсортировали колонку
ProductId по убыванию.

SELECT *
FROM Orders
ORDER BY ProductID DESC

7) Агрегатные функции – это функции, которые выполняют на наборе данных
арифметические вычисления и возвращают итоговое значение.
Если хотим например посмотреть среднюю зп по департаменту, то тут уже нужно
применять с GROUP BY, если просто среднюю зп по всем департаментам, то в SELECT
используем только одно поле и применяем к нему функцию select AVG(salary) …
• SUM – возвращает сумму значений в столбце;
• COUNT —вычисляет количество значений в столбце (значения NULL не
учитываются);
• AVG —среднее значение в столбце;
• MAX —максимальное значение в столбце;
• MIN —минимальное значение в столбце

SELECT COUNT(ProductID)
FROM Orders

8) В SQL подзапросы (внутренние/вложенные запросы) — это запрос внутри другого запроса SQL, который вложен в условие WHERE.
• Подзапрос используется для возврата данных, которые будут использоваться в основном запросе в качестве условия для дальнейшей фильтрации данных, подлежащих извлечению.
• Подзапросы могут использоваться с инструкциями SELECT, INSERT, UPDATE и DELETE вместе с операторами типа =, <,>,> =, <=, IN, BETWEEN и т. д. Подзапросы должны быть заключены в круглые скобки.
Пример: необходимо вывести все строки с заказами, где цена продукта, больше чем средняя цена по всем заказам.

SELECT *
FROM Orders
WHERE Price >(
	SELECT AVG(Price)
	FROM Orders
)

9) Соединение таблиц производится при помощи оператора JOIN. ON – позволяет прописать поля, по которым мы хотим соединить таблицы. В конкретном примере, мы соединили только те строки, которые присутствуют в обеих таблицах при помощи INNER JOIN (INNER ó JOIN). Если нам необходимо добавить условия по полям, то используют OR/AND.

SELECT c.CustomerID, o.ProductID, o.Counts, o.FirstName, o.Price
FROM Orders o
INNER JOIN Customers c ON c.FirstName = o.FirstName


## Логический порядок операций
Логический порядок операций для SQL-запроса:
1. FROM, включая JOINs
2. WHERE
3. GROUP BY
4. HAVING
5. Функции WINDOW (оконные функции)
6. SELECT
7. DISTINCT
8. UNION
9. ORDER BY
10. LIMIT и OFFSET

